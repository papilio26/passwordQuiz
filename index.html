<!DOCTYPE html>
<html>
<head>
  <title>passquiz</title>
  <meta charset="UTF-8">
  <style>
    body {
      font-family: sans-serif;
      max-width: 600px;
      margin: 50px auto;
      padding: 0 20px;
    }
    .question {
      border: 2px solid #ccc;
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      transition: background-color 0.8s ease, border-color 0.8s ease;
    }
    .correct {
      background-color: #c8f7c5;
      border-color: green;
    }
    .wrong {
      background-color: #f7c5c5;
      border-color: red;
    }
    button {
      display: block;
      margin: 20px auto;
      padding: 12px 40px;
      font-size: 18px;
      cursor: pointer;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 8px;
    }
    #result {
      text-align: center;
      font-size: 24px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>このパスワードは本当に良いんでしょうか</h1>

  <div id="quiz"></div>

  <button onclick="showResult()">結果を見る</button>
  <p id="result"></p>
  <p id="manager"></p>

  <script>
    const quizList = [
      {pass:"aaaaaa",correct:false,reason:"同じ文字を並べただけなので、誰でも思いつきます"},
      {pass:"password",correct:false,reason:"「パスワード」という単語そのままで、悪い人が一番最初に試す言葉です"},
      {pass:"qwertyuiop",correct:false,reason:"キーボードの上の段をそのまま打っただけです"},
      {pass:"252525",correct:false,reason:"同じ数字の繰り返しは簡単にバレます"},
      {pass:"X7#mK!9qL2",correct:true,reason:"規則性がないので、悪い人が予測するのが非常に難しいです"},
      {pass:"123456",correct:false,reason:"世界中で一番多く使われているパスワードです。絶対にダメです"},
      {pass:"Jt8#qZ!5wR",correct:true,reason:"規則性がないので、悪い人が予測するのが非常に難しいです"},
      {pass:"49jgKFo",correct:true,reason:"規則性がないので、悪い人が予測するのが非常に難しいです"},
      {pass:"banana09",correct:false,reason:"辞書に載っている単語は危険です。数字を足しても簡単に解読されます"},
      {pass:"poiuytrewq",correct:false,reason:"キーボードの逆順打ちも簡単にバレます"},
    ]

    let quiz = document.getElementById("quiz");
    for(let i = 0; i < 10; i++) {
      quiz.innerHTML += `
        <div id="q${i}" class="question">
          <p>${i + 1}問目：このパスワードは良いパスワードですか？</p>
          <p>${quizList[i].pass}</p>
          <label><input type="radio" name="q${i}" value="yes"> 良いパスワード</label>
          <label><input type="radio" name="q${i}" value="no"> 悪いパスワード</label>
          <p id="reason${i}"></p>
        </div>
      `;
    }

    function showResult() {
      let score = 0;
      for(let i = 0; i < 10; i++) {
        setTimeout(function() {
          let box = document.getElementById("q" + i);
          box.scrollIntoView({ behavior: "smooth", block: "center" });

          const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
          const trueSound = audioCtx.createOscillator();
          trueSound.connect(audioCtx.destination);
          trueSound.type = 'triangle';
          trueSound.frequency.setValueAtTime(880, audioCtx.currentTime);

          const falseSound = audioCtx.createOscillator();
          falseSound.connect(audioCtx.destination);
          falseSound.type = 'triangle';
          falseSound.frequency.setValueAtTime(220, audioCtx.currentTime);

          let selected = document.querySelector(`input[name="q${i}"]:checked`);
          if(selected && selected.value === "yes" && quizList[i].correct === true) {
            box.classList.add("correct");
            document.getElementById("reason" + i).textContent = "正解！" + quizList[i].reason;
            trueSound.start();
            trueSound.stop(audioCtx.currentTime + 0.3);
            score++;
          } else if(selected && selected.value === "no" && quizList[i].correct === false) {
            box.classList.add("correct");
            document.getElementById("reason" + i).textContent = "正解！" + quizList[i].reason;
            trueSound.start();
            trueSound.stop(audioCtx.currentTime + 0.3);
            score++;
          } else {
            box.classList.add("wrong");
            document.getElementById("reason" + i).textContent = "不正解..." + quizList[i].reason;
            falseSound.start();
            falseSound.stop(audioCtx.currentTime + 0.3);

          }

          if(i === 9) {
            document.getElementById("result").textContent = "10問中" + score + "問正解！";
            document.getElementById("manager").textContent = "強いパスワードを自分で覚えるのは大変です。パスワードマネージャーを使うと、強いパスワードを自動で作って管理してくれます。まずは無料で使えるBitwardenやGoogleのパスワードマネージャーを試してみましょう！";
          }
        }, 500 * i);
      }
    }
  </script>
</body>
</html>